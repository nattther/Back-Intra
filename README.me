# TechCampus-Back ‚Äî Backend API (Node.js + Express + PostgreSQL)

## üì¶ Description du projet

API simple en Node.js + Express + TypeScript + PostgreSQL pour g√©rer :  
- Utilisateurs (√©tudiants, professeurs)  
- Classes  
- Association utilisateur ‚Üî classes (un user peut avoir plusieurs classes)  
- Notes attribu√©es par un professeur √† un √©tudiant pour une classe  
- V√©rification de r√¥le utilisateur  

C‚Äôest un back ‚Äúprototype‚Äù / ‚Äúminimum viable‚Äù ‚Äî sans s√©curit√©, sans validation ‚Äî id√©al pour tester ou d√©velopper rapidement.

---

## üöÄ Installation & d√©marrage

```bash
git clone <url-de-ton-repo>
cd backend
npm install
# (optionnel) initialiser la base si elle est vide ‚Äî npm run init-db
npm run dev


| Fonction                  | M√©thode | URL                            | Body / Params                                                           | Description                                      |                        |
| ------------------------- | ------- | ------------------------------ | ----------------------------------------------------------------------- | ------------------------------------------------ | ---------------------- |
| Cr√©er un utilisateur      | POST    | `/users`                       | `{ "name": "...", "email": "...", "role": "student" \| "teacher" }`     | Cr√©ation d‚Äôun user avec r√¥le                     |                        |
| Lister utilisateurs       | GET     | `/users`                       | ‚Äî                                                                       | Retourne tous les users                          |                        |
| V√©rifier r√¥le utilisateur | POST    | `/users/check-role`            | `{ "userId": 1, "role": "student" }`                                    | Renvoie `{ ok: true                              | false }` selon le r√¥le |
| Cr√©er une classe          | POST    | `/classes`                     | `{ "label": "Classe X" }`                                               | Ajout d‚Äôune classe                               |                        |
| Lister classes            | GET     | `/classes`                     | ‚Äî                                                                       | Retourne toutes les classes                      |                        |
| Associer user ‚Üî classe    | POST    | `/user-classes`                | `{ "userId": 1, "classId": 2 }`                                         | Ajoute l‚Äôutilisateur √† la classe                 |                        |
| Lister classes d‚Äôun user  | GET     | `/user-classes/user/:userId`   | ‚Äî                                                                       | Renvoie les classes associ√©es √† un user          |                        |
| Lister users d‚Äôune classe | GET     | `/user-classes/class/:classId` | ‚Äî                                                                       | Renvoie les users associ√©s √† une classe          |                        |
| Ajouter une note          | POST    | `/notes`                       | `{ "studentId":1, "teacherId":2, "classId":3, "value":14.5, "ects":6 }` | Ajoute une note pour un √©tudiant dans une classe |                        |
| Lister toutes les notes   | GET     | `/notes`                       | ‚Äî                                                                       | Retourne toutes les notes                        |                        |

| Fonction                                  | M√©thode | URL                         | Body / Params                                                                                                                                    | Description                                                            |
| ----------------------------------------- | ------- | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------- |
| Cr√©er un cr√©neau pour une classe          | POST    | `/planning`                 | `{ "classId": 1, "teacherId": 1, "label": "Programmation Web", "room": "B101", "date": "2025-01-06", "startTime": "09:00", "endTime": "11:00" }` | Ajoute un cr√©neau de cours pour une classe et un prof                  |
| R√©cup√©rer le planning d‚Äôune classe        | GET     | `/planning/class/:classId`  | `classId` dans l‚ÄôURL                                                                                                                             | Liste tous les cr√©neaux (slots) d‚Äôune classe, avec infos du prof       |
| R√©cup√©rer le planning d‚Äôun √©l√®ve          | GET     | `/planning/student/:userId` | `userId` dans l‚ÄôURL (id du user, pas du student)                                                                                                 | R√©cup√®re la classe de l‚Äô√©l√®ve puis le planning (slots) de cette classe |
| Lister tous les cr√©neaux (toutes classes) | GET     | `/planning`                 | ‚Äî                                                                                                                                                | Retourne tous les cr√©neaux de toutes les classes (vue admin / debug)   |
