# TechCampus-Back ‚Äî Backend API (Node.js + Express + PostgreSQL)

## üì¶ Description du projet

API simple en Node.js + Express + TypeScript + PostgreSQL pour g√©rer :  
- Utilisateurs (√©tudiants, professeurs)  
- Classes  
- Association utilisateur ‚Üî classes (un user peut avoir plusieurs classes)  
- Notes attribu√©es par un professeur √† un √©tudiant pour une classe  
- V√©rification de r√¥le utilisateur  

C‚Äôest un back ‚Äúprototype‚Äù / ‚Äúminimum viable‚Äù ‚Äî sans s√©curit√©, sans validation ‚Äî id√©al pour tester ou d√©velopper rapidement.

---

## üöÄ Installation & d√©marrage

```bash
git clone <url-de-ton-repo>
cd backend
npm install
# (optionnel) initialiser la base si elle est vide ‚Äî npm run init-db
npm run dev

| Fonction                 | M√©thode | URL                 | Body / Params                                                                       | Description                                         |
| ------------------------ | ------- | ------------------- | ----------------------------------------------------------------------------------- | --------------------------------------------------- |
| **Cr√©er un utilisateur** | POST    | `/users`            | `{ "name": "...", "email": "...", "role": "...", "password": "...", "classId": 1 }` | Cr√©e un user + associe optionnellement √† une classe |
| **Lister utilisateurs**  | GET     | `/users`            | ‚Äî                                                                                   | Retourne tous les users (sans password_hash)        |
| **V√©rifier r√¥le**        | POST    | `/users/check-role` | `{ "userId": 1, "role": "student" }`                                                | Renvoie `{ ok: true/false }`                        |


| Fonction                      | M√©thode | URL                            | Body / Params                   | Description                                 |
| ----------------------------- | ------- | ------------------------------ | ------------------------------- | ------------------------------------------- |
| **Cr√©er une classe**          | POST    | `/classes`                     | `{ "label": "Classe X" }`       | Ajoute une classe                           |
| **Lister classes**            | GET     | `/classes`                     | ‚Äî                               | Retourne toutes les classes                 |
| **Associer user ‚Üî classe**    | POST    | `/user-classes`                | `{ "userId": 1, "classId": 2 }` | Ajoute l‚Äôutilisateur dans la classe         |
| **Classes d‚Äôun user**         | GET     | `/user-classes/user/:userId`   | ‚Äî                               | Retourne les classes d‚Äôun utilisateur       |
| **Users d‚Äôune classe**        | GET     | `/user-classes/class/:classId` | ‚Äî                               | Retourne les users inscrits dans une classe |
| **Retirer user d‚Äôune classe** | DELETE  | `/user-classes`                | `{ "userId": 1, "classId": 2 }` | Supprime l‚Äôassociation                      |


| Fonction                    | M√©thode | URL      | Body / Params                                                                   | Description               |
| --------------------------- | ------- | -------- | ------------------------------------------------------------------------------- | ------------------------- |
| **Ajouter une note**        | POST    | `/notes` | `{ "studentUserId":1, "teacherUserId":2, "classId":3, "value":14.5, "ects":6 }` | Ajoute une note           |
| **Lister toutes les notes** | GET     | `/notes` | ‚Äî                                                                               | Retourne toutes les notes |


| Fonction                             | M√©thode | URL                         | Body / Params                                                                                                                                        | Description                                              |
| ------------------------------------ | ------- | --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- |
| **Cr√©er un cr√©neau pour une classe** | POST    | `/planning`                 | `{ "classId": 1, "teacherUserId": 2, "label": "Programmation Web", "room": "B101", "date": "2025-01-06", "startTime": "09:00", "endTime": "11:00" }` | Ajoute un cr√©neau pour une classe + un prof              |
| **Planning d‚Äôune classe**            | GET     | `/planning/class/:classId`  | `classId`                                                                                                                                            | Retourne tous les cr√©neaux de la classe                  |
| **Planning d‚Äôun √©l√®ve**              | GET     | `/planning/student/:userId` | `userId` (id du user √©tudiant)                                                                                                                       | Retourne les cr√©neaux des classes o√π l'√©l√®ve est inscrit |
| **Planning d‚Äôun professeur**         | GET     | `/planning/teacher/:userId` | `userId` (id du user professeur)                                                                                                                     | Retourne les cr√©neaux o√π il enseigne                     |
| **Lister tous les cr√©neaux (admin)** | GET     | `/planning`                 | ‚Äî                                                                                                                                                    | Vue globale de tous les cr√©neaux                         |
